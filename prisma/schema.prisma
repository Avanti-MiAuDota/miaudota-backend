generator client {
  provider = "prisma-client-js" 
}

datasource db {
  provider = "postgresql"
  url = env("DATABASE_URL")
}

model Usuario {
  id           Int         @id @default(autoincrement())
  nomeCompleto String      @map("nome_completo")
  email        String      @unique
  senhaHash    String      @map("senha_hash")
  role         TipoUsuario @default(USUARIO)
  adocoes      Adocao[]
  criadoEm     DateTime    @default(now()) @map("criado_em")
}

model Endereco {
  id          Int       @id @default(autoincrement())
  cep         String
  logradouro  String
  numero      String
  complemento String?
  bairro      String
  cidade      String
  estado      String
  pais        String    @default("Brasil")
  telefone    String
  adocao      Adocao?
}

model Pet {
  id             Int        @id @default(autoincrement())
  nome           String
  especie        EspeciePet
  sexo           SexoPet
  dataNascimento DateTime?  @map("data_nascimento")
  descricao      String
  status         StatusPet  @default(DISPONIVEL)
  foto           String?
  adocoes        Adocao[]
  criadoEm       DateTime   @default(now()) @map("criado_em")
}

model Adocao {
  id           Int      @id @default(autoincrement())
  pet          Pet      @relation(fields: [petId], references: [id])
  petId        Int
  usuario      Usuario  @relation(fields: [usuarioId], references: [id])
  usuarioId    Int
  dataAdocao   DateTime @map("data_adocao")
  motivo       String
  aceitouTermo Boolean  @default(false)
  criadoEm     DateTime @default(now()) @map("criado_em")
  endereco     Endereco   @relation(fields: [enderecoId], references: [id])
  enderecoId   Int       @unique
  status       StatusAdocao @default(PENDENTE)
}

enum TipoUsuario { 
  USUARIO
  ADMIN 
}

enum EspeciePet {
  CAO
  GATO
}

enum SexoPet {
  MACHO
  FEMEA
}

enum StatusPet { 
  DISPONIVEL
  EM_ANALISE
  ADOTADO
}

enum StatusAdocao {
  PENDENTE
  APROVADA
  REJEITADA
}
